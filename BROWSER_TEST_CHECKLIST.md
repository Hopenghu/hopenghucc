# 🌐 瀏覽器功能測試檢查清單

> **測試環境**: https://www.hopenghu.cc/trip-planner  
> **需要**: 已登入帳號、瀏覽器開發者工具（F12）

---

## 🔧 測試前準備

1. **打開瀏覽器開發者工具**
   - 按 `F12` 或右鍵 → 檢查
   - 切換到「Console」標籤
   - 切換到「Network」標籤（可選，用於查看 API 請求）

2. **清除 Console**
   - 點擊 Console 中的清除按鈕（🚫）
   - 或按 `Ctrl+L` / `Cmd+L`

3. **確認已登入**
   - 如果未登入，會自動重定向到登入頁面

---

## 🧪 測試項目

### 測試 1: 地圖載入 ✅

**步驟**:
1. 訪問: https://www.hopenghu.cc/trip-planner
2. 等待地圖載入（約 2-3 秒）

**預期結果**:
- ✅ 地圖正常顯示
- ✅ 可以看到澎湖地區的地圖
- ✅ 地圖上有 POI 標記（藍色圖標）
- ✅ Console 沒有錯誤

**檢查項目**:
- [ ] 地圖正常顯示
- [ ] 可以看到 POI 標記
- [ ] Console 沒有 Google Maps API 錯誤

---

### 測試 2: 添加地點 ✅

**步驟**:
1. 點擊地圖上的一個 POI 標記
2. 應該看到地點詳情面板
3. 點擊「加入行程」或類似按鈕
4. 確認地點添加到右側行程面板

**預期結果**:
- ✅ 地點詳情面板顯示
- ✅ 地點添加到行程面板
- ✅ 地圖上顯示標記編號
- ✅ 已選地點數量更新

**檢查項目**:
- [ ] 可以點擊 POI 標記
- [ ] 地點詳情面板顯示
- [ ] 地點添加到行程
- [ ] 標記編號顯示

---

### 測試 3: 路線規劃功能 ⭐ **重點測試**

**步驟**:
1. 添加至少 2 個地點到同一天
2. 觀察地圖是否顯示藍色路線
3. 檢查 Console 是否有錯誤

**預期結果**:
- ✅ **路線在地圖上顯示**（藍色線條）
- ✅ **Console 沒有 `REQUEST_DENIED` 錯誤**
- ✅ 路線按照地點順序連接
- ✅ 路線樣式正確（藍色，寬度適中）

**如果看到錯誤**:
- ❌ `REQUEST_DENIED` → API Key 權限問題
- ❌ `This API key is not authorized` → API 未啟用或權限不足
- ⚠️ 使用降級方案（簡單折線）→ Directions API 未正常工作

**檢查項目**:
- [ ] 路線在地圖上顯示
- [ ] Console 沒有 Directions API 錯誤
- [ ] 路線按照正確順序連接
- [ ] 路線樣式正確

---

### 測試 4: 路線更新 ✅

**步驟**:
1. 在行程面板中拖拽地點改變順序
2. 觀察路線是否自動更新
3. 添加第 3 個地點
4. 確認路線包含所有地點

**預期結果**:
- ✅ 拖拽後路線自動更新
- ✅ 添加地點後路線更新
- ✅ 路線包含所有地點

**檢查項目**:
- [ ] 拖拽排序正常工作
- [ ] 路線自動更新
- [ ] 添加地點後路線更新

---

### 測試 5: 儲存行程功能 ✅

**步驟**:
1. 創建一個測試行程（添加 2-3 個地點）
2. 調整地點順序和時間
3. 點擊「儲存行程」按鈕
4. 觀察是否顯示成功訊息
5. 確認「儲存行程」按鈕變為「更新行程」

**預期結果**:
- ✅ 顯示成功訊息（如「行程已儲存」）
- ✅ 按鈕文字變為「更新行程」
- ✅ Console 沒有錯誤
- ✅ Network 標籤中看到成功的 API 請求

**檢查項目**:
- [ ] 儲存成功
- [ ] 顯示成功訊息
- [ ] 按鈕狀態更新
- [ ] Console 沒有錯誤

---

### 測試 6: 載入行程功能 ⭐ **重點測試**

**步驟**:
1. 重新整理頁面（或關閉後重新打開）
2. 點擊「載入行程」按鈕
3. 應該看到行程列表彈窗
4. 選擇剛才創建的行程
5. 確認行程正確載入

**預期結果**:
- ✅ 行程列表彈窗顯示
- ✅ 可以看到剛才創建的行程
- ✅ 選擇行程後正確載入
- ✅ 所有地點、順序、時間都正確
- ✅ 地圖標記正確顯示
- ✅ 路線正確顯示

**檢查項目**:
- [ ] 行程列表顯示
- [ ] 可以選擇行程
- [ ] 行程正確載入
- [ ] 所有資料正確
- [ ] 路線正確顯示

---

### 測試 7: URL 參數載入 ⭐ **重點測試**

**步驟**:
1. 從 Console 或 Network 標籤中獲取行程 ID
2. 訪問: `https://www.hopenghu.cc/trip-planner?id=<行程ID>`
3. 確認行程自動載入

**預期結果**:
- ✅ 頁面載入後行程自動載入
- ✅ 不需要點擊「載入行程」按鈕
- ✅ 所有資料正確

**檢查項目**:
- [ ] URL 參數正確識別
- [ ] 行程自動載入
- [ ] 所有資料正確

---

### 測試 8: 多天行程功能 ✅

**步驟**:
1. 點擊「+ 新增一天」按鈕
2. 在不同天添加地點
3. 切換天數標籤
4. 確認路線只顯示當前天的地點

**預期結果**:
- ✅ 可以添加多天
- ✅ 天數標籤正確顯示
- ✅ 切換天數後路線更新
- ✅ 路線只顯示當前天的地點

**檢查項目**:
- [ ] 可以添加多天
- [ ] 天數標籤正確
- [ ] 切換天數正常工作
- [ ] 路線正確更新

---

### 測試 9: 分享功能 ✅

**步驟**:
1. 創建或載入一個行程
2. 點擊「分享行程」按鈕
3. 複製分享連結
4. 在新視窗/無痕模式打開連結
5. 確認行程正確顯示（無需登入）

**預期結果**:
- ✅ 分享對話框顯示
- ✅ 連結可以複製
- [ ] 分享連結可以訪問
- [ ] 行程正確顯示（無需登入）

**檢查項目**:
- [ ] 分享功能正常
- [ ] 連結可以複製
- [ ] 分享頁面正確顯示

---

## 📊 Console 錯誤檢查

### 應該沒有以下錯誤

- ❌ `REQUEST_DENIED`（Directions API 權限錯誤）
- ❌ `This API key is not authorized`（API 未授權）
- ❌ `Google Maps API error`（地圖 API 錯誤）
- ❌ `CSP violation`（CSP 違規）
- ❌ `Failed to load`（載入失敗）

### 可以接受的警告

- ⚠️ 某些非關鍵的警告（如圖片載入失敗等）

---

## 📝 測試報告模板

```
測試日期: ___________
測試人員: ___________
瀏覽器: ___________

### 基本功能
- [ ] 地圖載入：✅ / ❌
- [ ] 添加地點：✅ / ❌
- [ ] 路線規劃：✅ / ❌
- [ ] 路線更新：✅ / ❌

### 儲存和載入
- [ ] 儲存行程：✅ / ❌
- [ ] 載入行程：✅ / ❌
- [ ] URL 參數載入：✅ / ❌

### 其他功能
- [ ] 多天行程：✅ / ❌
- [ ] 分享功能：✅ / ❌

### Console 錯誤
- [ ] 無錯誤：✅
- [ ] 有錯誤：❌（請記錄錯誤訊息）

### 發現的問題
1. _________________________________
2. _________________________________
3. _________________________________

### 備註
_________________________________
_________________________________
```

---

## 🔧 故障排除

### 問題：路線不顯示

**檢查**:
1. Console 是否有 `REQUEST_DENIED` 錯誤
2. 是否至少添加了 2 個地點
3. 地點是否有正確的坐標

**解決**:
- 如果看到 `REQUEST_DENIED`，確認 API Key 權限包含 Directions API
- 等待 1-2 分鐘讓 API 設置生效
- 清除瀏覽器快取

### 問題：載入行程失敗

**檢查**:
1. Network 標籤中的 API 請求
2. Console 是否有錯誤
3. 是否已登入

**解決**:
- 檢查 API 端點是否正常
- 確認資料庫連接正常
- 檢查用戶權限

---

**下一步**: 執行測試並填寫測試報告

