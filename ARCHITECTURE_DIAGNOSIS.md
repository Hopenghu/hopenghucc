# å°ˆæ¡ˆæ¶æ§‹è¨ºæ–·å ±å‘Š

**ç”Ÿæˆæ™‚é–“**: 2025-01-XX  
**å°ˆæ¡ˆ**: hopenghucc (å¥½æ¾æ¹– Cloudflare Worker)

---

## 1. æª”æ¡ˆçµæ§‹åˆ†æ

### 1.1 ç›®éŒ„çµæ§‹ç¸½è¦½

```
src/
â”œâ”€â”€ api/              (18 å€‹æª”æ¡ˆ) - API è·¯ç”±è™•ç†å™¨
â”œâ”€â”€ assets/           (1 å€‹æª”æ¡ˆ)  - éœæ…‹è³‡æº
â”œâ”€â”€ auth/             (2 å€‹æ¸¬è©¦æª”æ¡ˆ) - èªè­‰æ¸¬è©¦
â”œâ”€â”€ components/       (10 å€‹æª”æ¡ˆ) - React/UI çµ„ä»¶
â”œâ”€â”€ middleware/       (1 å€‹æª”æ¡ˆ)  - ä¸­é–“ä»¶
â”œâ”€â”€ models/           (5 å€‹æª”æ¡ˆ)  - è³‡æ–™æ¨¡å‹
â”œâ”€â”€ modules/          (4 å€‹æª”æ¡ˆ)  - åŠŸèƒ½æ¨¡çµ„
â”œâ”€â”€ pages/            (24 å€‹æª”æ¡ˆ) - é é¢æ¸²æŸ“å‡½æ•¸
â”œâ”€â”€ routes/           (2 å€‹æª”æ¡ˆ)  - è·¯ç”±å®šç¾©
â”œâ”€â”€ services/         (40+ å€‹æª”æ¡ˆ) - æ¥­å‹™é‚è¼¯æœå‹™
â”œâ”€â”€ styles/           (7 å€‹æª”æ¡ˆ)  - æ¨£å¼æª”æ¡ˆ
â”œâ”€â”€ templates/        (6 å€‹æª”æ¡ˆ)  - HTML æ¨¡æ¿
â”œâ”€â”€ types/            (3 å€‹æª”æ¡ˆ)  - TypeScript é¡å‹å®šç¾©
â”œâ”€â”€ utils/            (10 å€‹æª”æ¡ˆ) - å·¥å…·å‡½æ•¸
â””â”€â”€ worker.js         (1 å€‹æª”æ¡ˆ)  - å…¥å£é»
```

### 1.2 å‘½åä¸€è‡´æ€§å•é¡Œ

| å•é¡Œ | æª”æ¡ˆ | åš´é‡ç¨‹åº¦ | èªªæ˜ |
|------|------|----------|------|
| å‘½åä¸ä¸€è‡´ | `locationService.js` vs `LocationService.js` | ğŸ”´é«˜ | åŒæ™‚å­˜åœ¨å°å¯«å’Œå¤§å¯«ç‰ˆæœ¬ |
| å‘½åä¸ä¸€è‡´ | `LocationModule.js` vs `locationService.js` | ğŸŸ¡ä¸­ | åŠŸèƒ½é‡è¤‡ä½†å‘½åä¸åŒ |
| PascalCase çµ„ä»¶ | `CommentsComponent.js`, `RatingComponent.js` | ğŸŸ¢ä½ | ç¬¦åˆ React æ…£ä¾‹ |
| camelCase å·¥å…· | `cacheHelper.js`, `errorHandler.js` | ğŸŸ¢ä½ | ç¬¦åˆæ…£ä¾‹ |

### 1.3 é‡è¤‡/æœªä½¿ç”¨çš„æª”æ¡ˆ

| æª”æ¡ˆ | ç‹€æ…‹ | åš´é‡ç¨‹åº¦ | èªªæ˜ |
|------|------|----------|------|
| `src/pages/ItineraryPlanner.js` | å·²éš±è— | ğŸŸ¡ä¸­ | è·¯ç”±è¢«è¨»è§£ï¼Œä½†æª”æ¡ˆä»å­˜åœ¨ |
| `src/services/ts/ItineraryService.ts` | æœªä½¿ç”¨ | ğŸ”´é«˜ | TypeScript ç‰ˆæœ¬ï¼Œä½†å°ˆæ¡ˆä¸»è¦ä½¿ç”¨ JS |
| `src/types/*.ts` | éƒ¨åˆ†ä½¿ç”¨ | ğŸŸ¡ä¸­ | TypeScript é¡å‹å®šç¾©ï¼Œä½†å°ˆæ¡ˆæ˜¯ JS |
| `src/pages/TestCardPage.js` | æœªè·¯ç”± | ğŸŸ¢ä½ | æ¸¬è©¦é é¢ï¼Œå¯èƒ½ä¸éœ€è¦ |
| `src/pages/DigitalCardPage.js` | æœªè·¯ç”± | ğŸŸ¡ä¸­ | æ•¸ä½å¡ç‰ŒåŠŸèƒ½å·²ç¦ç”¨ |
| `src/pages/DesignPreview.js` | æœ‰è·¯ç”± | ğŸŸ¢ä½ | è¨­è¨ˆé è¦½é é¢ |
| `src/pages/googleInfo.js` | å…§è¯å®šç¾© | ğŸŸ¡ä¸­ | æ‡‰è©²ç§»åˆ° pages/ ç›®éŒ„ |

---

## 2. å¥—ä»¶ä¾è³´æª¢æŸ¥

### 2.1 æœªä½¿ç”¨çš„å¥—ä»¶

| å¥—ä»¶ | ç‰ˆæœ¬ | åš´é‡ç¨‹åº¦ | èªªæ˜ |
|------|------|----------|------|
| `react-router-dom` | ^6.22.3 | ğŸ”´é«˜ | Cloudflare Workers ä¸ä½¿ç”¨å®¢æˆ¶ç«¯è·¯ç”± |
| `react-scripts` | 5.0.1 | ğŸ”´é«˜ | ç”¨æ–¼ Create React Appï¼Œæ­¤å°ˆæ¡ˆä¸ä½¿ç”¨ |
| `@testing-library/react` | ^13.4.0 | ğŸŸ¡ä¸­ | æ¸¬è©¦å¥—ä»¶ï¼Œä½†æ¸¬è©¦å¾ˆå°‘ |
| `@testing-library/jest-dom` | ^5.17.0 | ğŸŸ¡ä¸­ | æ¸¬è©¦å¥—ä»¶ï¼Œä½†æ¸¬è©¦å¾ˆå°‘ |
| `@testing-library/user-event` | ^13.5.0 | ğŸŸ¡ä¸­ | æ¸¬è©¦å¥—ä»¶ï¼Œä½†æ¸¬è©¦å¾ˆå°‘ |
| `@heroicons/react` | ^2.1.1 | ğŸŸ¡ä¸­ | React åœ–æ¨™åº«ï¼Œä½†å°ˆæ¡ˆæ˜¯ SSR |
| `@react-google-maps/api` | ^2.19.2 | ğŸŸ¡ä¸­ | React Google Mapsï¼Œä½†å°ˆæ¡ˆç›´æ¥ä½¿ç”¨ Google Maps API |
| `web-vitals` | ^2.1.4 | ğŸŸ¢ä½ | æ€§èƒ½ç›£æ§ï¼Œå¯èƒ½æœ‰ç”¨ |

### 2.2 ç¼ºå°‘ä½†æ‡‰è©²å®‰è£çš„å¥—ä»¶

| å¥—ä»¶ | åš´é‡ç¨‹åº¦ | èªªæ˜ |
|------|----------|------|
| `eslint` | ğŸŸ¡ä¸­ | ä»£ç¢¼æª¢æŸ¥å·¥å…· |
| `prettier` | ğŸŸ¡ä¸­ | ä»£ç¢¼æ ¼å¼åŒ–å·¥å…· |
| `@types/node` | ğŸŸ¢ä½ | TypeScript é¡å‹å®šç¾©ï¼ˆå¦‚æœä½¿ç”¨ TSï¼‰ |

### 2.3 ç‰ˆæœ¬è¡çª

| å¥—ä»¶ | å•é¡Œ | åš´é‡ç¨‹åº¦ | èªªæ˜ |
|------|------|----------|------|
| `esbuild` | é‡è¤‡å®šç¾© | ğŸŸ¡ä¸­ | dependencies å’Œ devDependencies éƒ½æœ‰ |
| `esbuild` | ç‰ˆæœ¬ä¸åŒ | ğŸŸ¡ä¸­ | dependencies: ^0.19.0, devDependencies: ^0.20.2 |

---

## 3. è·¯ç”±çµæ§‹åˆ†æ

### 3.1 å®šç¾©çš„è·¯ç”±

| è·¯ç”± | é é¢çµ„ä»¶ | ç‹€æ…‹ | åš´é‡ç¨‹åº¦ |
|------|----------|------|----------|
| `/` | `Home.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/login` | `Login.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/google-info` | å…§è¯å®šç¾© | âš ï¸ æ‡‰é‡æ§‹ | ğŸŸ¡ä¸­ |
| `/admin/dashboard` | `AdminDashboard.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/admin/images` | `ImageManagement.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/admin/ai` | `AIAdminPage.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/admin/verifications` | `BusinessVerificationAdmin.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/admin/ecosystem` | `EcosystemDashboard.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/profile` | `Profile.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/footprints` | `Footprints.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/ai-chat` | `AIChatPage.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/story-timeline` | `StoryTimeline.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/recommendations` | `Recommendations.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/search` | `Search.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/favorites` | `Favorites.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/itinerary` | `ItineraryPlanner.js` | âŒ å·²éš±è— | ğŸŸ¡ä¸­ |
| `/trip-planner` | `TripPlanner.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/trip-planner/shared/:token` | `TripPlanner.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/location/:id` | `LocationDetail.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/design-preview` | `DesignPreview.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/game` | `GamePage.js` | âœ… æ´»èº | ğŸŸ¢ä½ |
| `/cards` | ç„¡çµ„ä»¶ | âŒ æ­»è·¯ç”± | ğŸ”´é«˜ |
| `/game-test` | ç„¡çµ„ä»¶ | âŒ æ­»è·¯ç”± | ğŸ”´é«˜ |
| `/test` | `SimpleTestPage.js` | âš ï¸ æ¸¬è©¦é é¢ | ğŸŸ¡ä¸­ |
| `/test-simple` | `TestPage.js` | âš ï¸ æ¸¬è©¦é é¢ | ğŸŸ¡ä¸­ |

### 3.2 æ­»è·¯ç”±å•é¡Œ

| è·¯ç”± | å•é¡Œ | åš´é‡ç¨‹åº¦ | å»ºè­° |
|------|------|----------|------|
| `/cards` | åªè¿”å›æ–‡å­—ï¼Œç„¡å¯¦éš›åŠŸèƒ½ | ğŸ”´é«˜ | ç§»é™¤æˆ–å¯¦ç¾åŠŸèƒ½ |
| `/game-test` | åªè¿”å›æ–‡å­—ï¼Œç„¡å¯¦éš›åŠŸèƒ½ | ğŸ”´é«˜ | ç§»é™¤æˆ–å¯¦ç¾åŠŸèƒ½ |

---

## 4. çµ„ä»¶ä¾è³´åœ–

### 4.1 è¢«å¤šè™•ä½¿ç”¨çš„çµ„ä»¶

| çµ„ä»¶ | ä½¿ç”¨æ¬¡æ•¸ | åš´é‡ç¨‹åº¦ | èªªæ˜ |
|------|----------|----------|------|
| `layout.js` (pageTemplate) | 20+ | ğŸŸ¢ä½ | æ ¸å¿ƒå¸ƒå±€çµ„ä»¶ï¼Œæ­£å¸¸ |
| `LocationCard.js` | 5+ | ğŸŸ¢ä½ | åœ°é»å¡ç‰‡ï¼Œæ­£å¸¸ |
| `LocationCardGrid.js` | 3+ | ğŸŸ¢ä½ | åœ°é»ç¶²æ ¼ï¼Œæ­£å¸¸ |
| `Navbar.js` | å¤šè™• | ğŸŸ¢ä½ | å°èˆªæ¬„ï¼Œæ­£å¸¸ |

### 4.2 å®Œå…¨æ²’è¢« import çš„çµ„ä»¶

| çµ„ä»¶ | åš´é‡ç¨‹åº¦ | èªªæ˜ |
|------|----------|------|
| `TestCardPage.js` | ğŸŸ¡ä¸­ | æ¸¬è©¦é é¢ï¼Œæœªåœ¨è·¯ç”±ä¸­ä½¿ç”¨ |
| `DigitalCardPage.js` | ğŸŸ¡ä¸­ | æ•¸ä½å¡ç‰ŒåŠŸèƒ½å·²ç¦ç”¨ |
| `adminLayout.js` | ğŸŸ¡ä¸­ | ç®¡ç†å¾Œå°å¸ƒå±€ï¼Œå¯èƒ½æœªä½¿ç”¨ |

### 4.3 å¾ªç’°ä¾è³´æª¢æŸ¥

| ä¾è³´é—œä¿‚ | åš´é‡ç¨‹åº¦ | èªªæ˜ |
|----------|----------|------|
| `ServiceFactory` â†” `AIAgentFactory` | ğŸŸ¡ä¸­ | æœ‰å¾ªç’°ä¾è³´ï¼Œä½†å·²è™•ç†ï¼ˆé€šéåƒæ•¸å‚³éï¼‰ |
| `AIService` â†’ `LocationService` â†’ `AIService` | ğŸŸ¢ä½ | ç„¡ç›´æ¥å¾ªç’° |

### 4.4 æœå‹™ä½¿ç”¨æƒ…æ³

| æœå‹™ | ä½¿ç”¨æƒ…æ³ | åš´é‡ç¨‹åº¦ | èªªæ˜ |
|------|----------|----------|------|
| `RouterService.js` | æœªä½¿ç”¨ | ğŸ”´é«˜ | å®šç¾©äº†ä½†æ²’æœ‰è¢«ä½¿ç”¨ |
| `locationService.js` | å»£æ³›ä½¿ç”¨ | ğŸŸ¢ä½ | æ­£å¸¸ |
| `LocationModule.js` | éƒ¨åˆ†ä½¿ç”¨ | ğŸŸ¡ä¸­ | å¯èƒ½èˆ‡ locationService é‡è¤‡ |
| `ItineraryService.js` (JS) | ä½¿ç”¨ä¸­ | ğŸŸ¢ä½ | æ­£å¸¸ |
| `ItineraryService.ts` (TS) | æœªä½¿ç”¨ | ğŸ”´é«˜ | TypeScript ç‰ˆæœ¬æœªä½¿ç”¨ |

---

## 5. åš´é‡å•é¡Œç¸½çµ

### ğŸ”´ é«˜å„ªå…ˆç´šå•é¡Œ

1. **æœªä½¿ç”¨çš„å¥—ä»¶** (7 å€‹)
   - `react-router-dom`, `react-scripts`, æ¸¬è©¦å¥—ä»¶ç­‰
   - å½±éŸ¿ï¼šå¢åŠ  bundle å¤§å°ï¼Œæ··æ·†ä¾è³´é—œä¿‚

2. **æ­»è·¯ç”±** (2 å€‹)
   - `/cards`, `/game-test` åªè¿”å›æ–‡å­—
   - å½±éŸ¿ï¼šæ··æ·†è·¯ç”±çµæ§‹

3. **æœªä½¿ç”¨çš„æœå‹™**
   - `RouterService.js` å®Œå…¨æœªä½¿ç”¨
   - `ItineraryService.ts` TypeScript ç‰ˆæœ¬æœªä½¿ç”¨

4. **å‘½åä¸ä¸€è‡´**
   - `locationService.js` vs `LocationService.js`
   - å½±éŸ¿ï¼šæ··æ·†å°å…¥è·¯å¾‘

### ğŸŸ¡ ä¸­å„ªå…ˆç´šå•é¡Œ

1. **éš±è—ä½†æœªåˆªé™¤çš„æª”æ¡ˆ**
   - `ItineraryPlanner.js` è·¯ç”±è¢«è¨»è§£ä½†æª”æ¡ˆå­˜åœ¨

2. **æ¸¬è©¦é é¢**
   - `TestCardPage.js`, `TestPage.js`, `SimpleTestPage.js`
   - å»ºè­°ï¼šç§»åˆ° `__tests__` æˆ–ç§»é™¤

3. **å…§è¯å®šç¾©çš„è·¯ç”±**
   - `renderGoogleInfoPage` åœ¨ `routes/index.js` ä¸­å…§è¯å®šç¾©
   - å»ºè­°ï¼šç§»åˆ° `pages/googleInfo.js`

### ğŸŸ¢ ä½å„ªå…ˆç´šå•é¡Œ

1. **TypeScript æª”æ¡ˆ**
   - `src/types/*.ts`, `src/services/ts/ItineraryService.ts`
   - å»ºè­°ï¼šçµ±ä¸€ä½¿ç”¨ JS æˆ– TS

2. **ç‰ˆæœ¬è¡çª**
   - `esbuild` åœ¨ dependencies å’Œ devDependencies ä¸­ç‰ˆæœ¬ä¸åŒ

---

## 6. å»ºè­°è¡Œå‹•è¨ˆåŠƒ

### ç«‹å³è™•ç†ï¼ˆğŸ”´é«˜å„ªå…ˆç´šï¼‰

1. **ç§»é™¤æœªä½¿ç”¨çš„å¥—ä»¶**
   ```bash
   npm uninstall react-router-dom react-scripts @testing-library/react @testing-library/jest-dom @testing-library/user-event @heroicons/react @react-google-maps/api
   ```

2. **ä¿®å¾©æ­»è·¯ç”±**
   - ç§»é™¤ `/cards` å’Œ `/game-test` è·¯ç”±
   - æˆ–å¯¦ç¾å¯¦éš›åŠŸèƒ½

3. **çµ±ä¸€å‘½å**
   - æ±ºå®šä½¿ç”¨ `locationService.js` æˆ– `LocationService.js`
   - çµ±ä¸€æ‰€æœ‰æœå‹™æª”æ¡ˆå‘½å

4. **ç§»é™¤æœªä½¿ç”¨çš„æª”æ¡ˆ**
   - åˆªé™¤ `RouterService.js`ï¼ˆå¦‚æœç¢ºèªä¸ä½¿ç”¨ï¼‰
   - åˆªé™¤ `ItineraryService.ts`ï¼ˆå¦‚æœä½¿ç”¨ JS ç‰ˆæœ¬ï¼‰

### çŸ­æœŸè™•ç†ï¼ˆğŸŸ¡ä¸­å„ªå…ˆç´šï¼‰

1. **é‡æ§‹å…§è¯è·¯ç”±**
   - å°‡ `renderGoogleInfoPage` ç§»åˆ° `pages/googleInfo.js`

2. **æ¸…ç†æ¸¬è©¦é é¢**
   - æ±ºå®šä¿ç•™æˆ–ç§»é™¤æ¸¬è©¦é é¢

3. **ä¿®å¾©ç‰ˆæœ¬è¡çª**
   - çµ±ä¸€ `esbuild` ç‰ˆæœ¬

### é•·æœŸå„ªåŒ–ï¼ˆğŸŸ¢ä½å„ªå…ˆç´šï¼‰

1. **çµ±ä¸€èªè¨€**
   - æ±ºå®šä½¿ç”¨ TypeScript æˆ– JavaScript
   - ç§»é™¤ä¸éœ€è¦çš„é¡å‹å®šç¾©

2. **æ·»åŠ ä»£ç¢¼æª¢æŸ¥å·¥å…·**
   - é…ç½® ESLint
   - é…ç½® Prettier

---

## 7. æ¶æ§‹æ”¹é€²å»ºè­°

### 7.1 ç›®éŒ„çµæ§‹å„ªåŒ–

å»ºè­°çš„ç›®éŒ„çµæ§‹ï¼š
```
src/
â”œâ”€â”€ api/           # API è·¯ç”±è™•ç†å™¨
â”œâ”€â”€ components/    # å¯é‡ç”¨çµ„ä»¶
â”œâ”€â”€ pages/         # é é¢æ¸²æŸ“å‡½æ•¸
â”œâ”€â”€ services/      # æ¥­å‹™é‚è¼¯æœå‹™
â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•¸
â”œâ”€â”€ types/         # é¡å‹å®šç¾©ï¼ˆå¦‚æœä½¿ç”¨ TSï¼‰
â””â”€â”€ worker.js      # å…¥å£é»
```

### 7.2 å‘½åè¦ç¯„

- **çµ„ä»¶**: PascalCase (`LocationCard.js`)
- **æœå‹™**: PascalCase (`LocationService.js`)
- **å·¥å…·**: camelCase (`cacheHelper.js`)
- **é é¢**: PascalCase (`Home.js`)

### 7.3 ä¾è³´ç®¡ç†

- ç§»é™¤æ‰€æœ‰æœªä½¿ç”¨çš„å¥—ä»¶
- çµ±ä¸€ç‰ˆæœ¬è™Ÿ
- å®šæœŸæ›´æ–°ä¾è³´

---

**å ±å‘ŠçµæŸ**

